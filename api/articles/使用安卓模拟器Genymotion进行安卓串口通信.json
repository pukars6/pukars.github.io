{"title":"使用安卓模拟器Genymotion进行安卓串口通信","uid":"ad30d7a27781c6d6237493cbdb63e7fa","slug":"使用安卓模拟器Genymotion进行安卓串口通信","date":"2024-06-26T14:52:22.000Z","updated":"2024-06-26T15:29:18.786Z","comments":true,"path":"api/articles/使用安卓模拟器Genymotion进行安卓串口通信.json","keywords":null,"cover":[],"content":"<p>在开发软件中由于手上没有真机设备，但又需要进行串口通信的功能开发与测试，所以在探寻使用模拟器进行串口通信操作的方案。</p>\n<h1 id=\"所需软件\"><a href=\"#所需软件\" class=\"headerlink\" title=\"所需软件\"></a>所需软件</h1><p><strong>Virtual Serial Port Driver</strong>：在电脑上虚拟一对串口，网上搜索可以下载</p>\n<p><strong>Genymotion（附带VirtualBox</strong>）：Genymotion的Android11镜像，用起来性能还不错，自带root，VirtualBox设置串口映射后，在模拟器上运行的App可进行串口通信，在官网注册使用试用版，或使用个人使用证书均可。</p>\n<p><strong>串口调试助手</strong>：市面上任意一款串口调试助手均可，没有什么差别</p>\n<h1 id=\"为什么使用Genymotion\"><a href=\"#为什么使用Genymotion\" class=\"headerlink\" title=\"为什么使用Genymotion?\"></a>为什么使用Genymotion?</h1><p>Android Studio自带模拟器Android Simulator在传输一定量的数据会卡死，这个字符量非常小，传不了几个字符就卡死了。</p>\n<p>使用Genymotion+VirtualBox可以很便捷地配置串口</p>\n<h1 id=\"操作步骤\"><a href=\"#操作步骤\" class=\"headerlink\" title=\"操作步骤\"></a>操作步骤</h1><h2 id=\"安装虚拟串口软件Virtual-Serial-Port-Driver\"><a href=\"#安装虚拟串口软件Virtual-Serial-Port-Driver\" class=\"headerlink\" title=\"安装虚拟串口软件Virtual Serial Port Driver\"></a>安装虚拟串口软件Virtual Serial Port Driver</h2><p>在网上搜索软件下载安装后，点击右侧添加端口，记住自己所添加的端口名，我这里添加了2个虚拟串口：<strong>COM2</strong>和<strong>COM5</strong></p>\n<p><img src=\"https://pukars-imagehosting.oss-cn-nanjing.aliyuncs.com/images/20240626222813.png\" alt=\"https://pukars-imagehosting.oss-cn-nanjing.aliyuncs.com/images/20240626222813.png\"></p>\n<p>若APP&#x2F;串口调试助手打开串口，串口名右侧会显示串口对应信息</p>\n<p><img src=\"https://pukars-imagehosting.oss-cn-nanjing.aliyuncs.com/images/20240626222936.png\" alt=\"https://pukars-imagehosting.oss-cn-nanjing.aliyuncs.com/images/20240626222936.png\"></p>\n<h2 id=\"安装与使用Genymotion\"><a href=\"#安装与使用Genymotion\" class=\"headerlink\" title=\"安装与使用Genymotion\"></a>安装与使用Genymotion</h2><p>Genymotion官网：<a href=\"https://www.genymotion.com/\">https://www.genymotion.com/</a></p>\n<p>注册后会发送试用版下载链接到邮箱，有效期30天，过期了也影响不大，转成person use证书，缺失的功能对我们串口功能的调试影响不大。</p>\n<p>请<strong>务必下载</strong>附带VirtualBox的版本，我们需要VirtualBox设置串口映射。</p>\n<p>打开genymotion，在<strong>右上角</strong>添加对应的设备，选择对应的<strong>屏幕尺寸，镜像</strong>等等，创建完后启动。</p>\n<p><img src=\"https://pukars-imagehosting.oss-cn-nanjing.aliyuncs.com/images/20240626223218.png\" alt=\"https://pukars-imagehosting.oss-cn-nanjing.aliyuncs.com/images/20240626223218.png\"></p>\n<h2 id=\"在VirtualBox内配置串口\"><a href=\"#在VirtualBox内配置串口\" class=\"headerlink\" title=\"在VirtualBox内配置串口\"></a>在VirtualBox内配置串口</h2><p>选择刚创建的模拟器镜像，右键<strong>设置</strong>，进入<strong>设置页面</strong>，选择<strong>“串口”</strong></p>\n<p><img src=\"https://pukars-imagehosting.oss-cn-nanjing.aliyuncs.com/images/20240626224116.png\" alt=\"https://pukars-imagehosting.oss-cn-nanjing.aliyuncs.com/images/20240626224116.png\"></p>\n<p>选择一个端口（此处选择端口1），勾选启用串口，端口编号设置为<strong>COM1（注意，其是&#x2F;dev&#x2F;ttyS0，而不是&#x2F;dev&#x2F;ttyS1），</strong>端口模式选择<strong>“主机设备”</strong>，路径&#x2F;地址选择在<strong>Virtual Serial Port Driver</strong>中的虚拟串口（上文中我设置为COM2&#x2F;COM5），此处我设置为<strong>COM2</strong>，在<strong>串口调试助手</strong>则设置<strong>COM5。</strong></p>\n<h2 id=\"设置串口访问权限（每次启动模拟器后都需要执行）\"><a href=\"#设置串口访问权限（每次启动模拟器后都需要执行）\" class=\"headerlink\" title=\"设置串口访问权限（每次启动模拟器后都需要执行）\"></a>设置串口访问权限（每次启动模拟器后都需要执行）</h2><p>在<strong>powershell</strong>或<strong>cmd</strong>中修改对串口的访问权限，否则模拟器的APP无法正常访问串口</p>\n<p>依次输入下列命令即可（若有多台设备，请在输入命令时指定模拟器设备）</p>\n<div class=\"language-shell\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">shell</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">adb</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">root</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #FFCB6B\">genymotion的镜像自带root，一般可略过）</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">adb</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">shell</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">setenforce</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">chmod</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">777</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">/dev/ttyS</span><span style=\"color: #BABED8\">*</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #FFCB6B\">ttyS*也可替换成你所配置的串口名，这里为了图方便设置所有的串口）</span></span></code></pre></div><h2 id=\"打开串口调试助手\"><a href=\"#打开串口调试助手\" class=\"headerlink\" title=\"打开串口调试助手\"></a>打开串口调试助手</h2><p>此处以我使用的<strong>Serial Port Utility</strong>为例</p>\n<p>选择在<strong>Serial Port Driver</strong>中创建的虚拟串口<strong>COM5</strong>，设置好对应的其他串口参数，点击<strong>打开</strong></p>\n<p><img src=\"https://pukars-imagehosting.oss-cn-nanjing.aliyuncs.com/images/20240626224705.png\" alt=\"https://pukars-imagehosting.oss-cn-nanjing.aliyuncs.com/images/20240626224705.png\"></p>\n<p><img src=\"https://pukars-imagehosting.oss-cn-nanjing.aliyuncs.com/images/20240626224705.png\" alt=\"https://pukars-imagehosting.oss-cn-nanjing.aliyuncs.com/images/20240626224705.png\"></p>\n<h2 id=\"打开所开发的APP，进行开发与测试\"><a href=\"#打开所开发的APP，进行开发与测试\" class=\"headerlink\" title=\"打开所开发的APP，进行开发与测试\"></a>打开所开发的APP，进行开发与测试</h2><p>此时已正常进行串口的收发了，在<strong>Virtual Serial Driver</strong>中可以看到两个虚拟串口的累计收发数据量，便于调试。</p>\n","feature":true,"text":"在开发软件中由于手上没有真机设备，但又需要进行串口通信的功能开发与测试，所以在探寻使用模拟器进行串口通信操作的方案。 所需软件Virtual Serial Po...","permalink":"/post/使用安卓模拟器Genymotion进行安卓串口通信","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"串口通信","slug":"串口通信","count":2,"path":"api/tags/串口通信.json"},{"name":"安卓开发","slug":"安卓开发","count":1,"path":"api/tags/安卓开发.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%89%80%E9%9C%80%E8%BD%AF%E4%BB%B6\"><span class=\"toc-text\">所需软件</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8Genymotion\"><span class=\"toc-text\">为什么使用Genymotion?</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4\"><span class=\"toc-text\">操作步骤</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85%E8%99%9A%E6%8B%9F%E4%B8%B2%E5%8F%A3%E8%BD%AF%E4%BB%B6Virtual-Serial-Port-Driver\"><span class=\"toc-text\">安装虚拟串口软件Virtual Serial Port Driver</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8Genymotion\"><span class=\"toc-text\">安装与使用Genymotion</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9C%A8VirtualBox%E5%86%85%E9%85%8D%E7%BD%AE%E4%B8%B2%E5%8F%A3\"><span class=\"toc-text\">在VirtualBox内配置串口</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E4%B8%B2%E5%8F%A3%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%EF%BC%88%E6%AF%8F%E6%AC%A1%E5%90%AF%E5%8A%A8%E6%A8%A1%E6%8B%9F%E5%99%A8%E5%90%8E%E9%83%BD%E9%9C%80%E8%A6%81%E6%89%A7%E8%A1%8C%EF%BC%89\"><span class=\"toc-text\">设置串口访问权限（每次启动模拟器后都需要执行）</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%89%93%E5%BC%80%E4%B8%B2%E5%8F%A3%E8%B0%83%E8%AF%95%E5%8A%A9%E6%89%8B\"><span class=\"toc-text\">打开串口调试助手</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%89%93%E5%BC%80%E6%89%80%E5%BC%80%E5%8F%91%E7%9A%84APP%EF%BC%8C%E8%BF%9B%E8%A1%8C%E5%BC%80%E5%8F%91%E4%B8%8E%E6%B5%8B%E8%AF%95\"><span class=\"toc-text\">打开所开发的APP，进行开发与测试</span></a></li></ol></li></ol>","author":{"name":"PUKARS","slug":"blog-author","avatar":"https://pukars-imagehosting.oss-cn-nanjing.aliyuncs.com/images/githubblog_avatar.jpg","link":"/","description":"随时记录随想","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"MySql学习笔记","uid":"f1a792b501e3163193242c5efd86d5ca","slug":"MySql学习笔记","date":"2024-06-26T14:04:12.000Z","updated":"2024-06-26T14:07:04.301Z","comments":true,"path":"api/articles/MySql学习笔记.json","keywords":null,"cover":"https://img.doczz.cn/storage/20240325/7aa156f3a052b2988976f941d2fa2a04.png","text":"MySQL学习笔记：数据库设计与优化1. 数据库设计原则 规范化：通过消除数据冗余和确保数据的独立性，提高数据的一致性和减少更新异常。 反规范化：在某些情况下，...","permalink":"/post/MySql学习笔记","photos":[],"count_time":{"symbolsCount":765,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"MySQL","slug":"MySQL","count":1,"path":"api/tags/MySQL.json"}],"author":{"name":"PUKARS","slug":"blog-author","avatar":"https://pukars-imagehosting.oss-cn-nanjing.aliyuncs.com/images/githubblog_avatar.jpg","link":"/","description":"随时记录随想","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}